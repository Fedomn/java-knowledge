## 观察者模式(Observer Pattern)也叫做发布订阅模式(Publish/subscribe).

> 定义对象之间一种一对多的依赖关系,使得每当一个对象改变状态,则所有依赖于它的对象都会得到通知并自动更新.

### 优点

#### 观察者和被观察者之间是抽象耦合

这样对subject和observer进行扩展都很容易

#### 建立一套触发机制

根据单一职责原则,每个类的职责都是单一的,然后串联成一个复杂的逻辑关系.subject和observer形成一个触发链.

### 注意事项

#### 广播链的问题

一个观察者可以有双重身份,既是Observer也是subject.但是链一旦建立,这个逻辑就比较复杂,可维护性较差.所以,建议一个Observer-pattern中
最多出现一个对象既是Observer也是subject,也就是说消息最多转发一次(传递两次).

**它与责任链模式最大区别就是观察者广播链在传播的过程中消息是随时更改的,它是由相邻的两个节点协商的消息结构;
而责任链模式在消息传递过程中,基本保持消息不可变.如果要改变,也只是在原有的消息上进行修正**

#### 异步处理问题

subject发生动作了,Observer要回应.如果Observer比较多,而且处理时间比较长,就要异步处理.这是就要考虑线程安全和队列问题.可以参考Message Queue.

#### Observer与subject间消息沟通

subject状态改变会触发Observer一个行为,同时会传递给一个消息给Observer.
而一般传递给Observer#update两个参数,一个subject,一个是DTO(传输对象1)由Observer消费.